(this["webpackJsonpreact_weather-chart"]=this["webpackJsonpreact_weather-chart"]||[]).push([[0],{29:function(t,e,a){t.exports=a(44)},34:function(t,e,a){},35:function(t,e,a){},41:function(t,e,a){},43:function(t,e,a){},44:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=(a(34),a(35),a(7)),s={maxTempList:[],minTempList:[],humidityList:[],locationList:[],woeid:0,city:""},u=a(20),l=Object(u.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0,a=e.type;switch(a){case"GET_WEATHER_BY_DATE":var n=c(e.payload.list);return Object(i.a)(Object(i.a)(Object(i.a)({},t),n),{},{loading:!1,woeid:e.payload.woeid,city:e.payload.city});case"GET_LOCATION":return Object(i.a)(Object(i.a)({},t),{},{locationList:r(e.payload.list)});default:return Object(i.a)({},t)}function r(t){return t.map((function(t){return{title:t.title,woeid:t.woeid}}))}function c(t){var e=[],a=[],n=[];return t.forEach((function(t){var r=t.max_temp,c=t.min_temp,o=t.humidity,s=t.applicable_date,u={};u[s]=r,e.push(Object(i.a)({},u)),u[s]=c,a.push(Object(i.a)({},u)),u[s]=o,n.push(Object(i.a)({},u))})),{maxTempList:e,minTempList:a,humidityList:n}}})),f=a(13),p=a(8),d=a.n(p),h=a(9),v=a(16),m=function(t){return{type:"GET_LOCATION",payload:{list:t}}},b=function(t,e,a){return{type:"GET_WEATHER_BY_DATE",payload:{woeid:t,city:e,list:a}}},O=function(){var t=Object(h.a)(d.a.mark((function t(e){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="search/?query=".concat(e),t.next=3,j(a);case 3:if(200===(n=t.sent).status){t.next=6;break}return t.abrupt("return",[]);case 6:return t.next=8,n.json();case 8:return r=t.sent,t.abrupt("return",void 0===r?[]:r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(h.a)(d.a.mark((function t(e,a){var n,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(a,"/"),t.next=3,j(n);case 3:if(200===(r=t.sent).status){t.next=6;break}return t.abrupt("return",[]);case 6:return t.next=8,r.json();case 8:return c=t.sent,t.abrupt("return",void 0===c?[]:c);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),j=function(t,e){var a="".concat("https://www.metaweather.com/api/location/").concat(t);return fetch(a,{headers:{"Access-Control-Allow-Origin":"*"}})},w=(a(41),a(2));var y,E,x=Object(f.b)((function(t){return{locationList:t.locationList}}),(function(t){return{getLocation:function(){var e=Object(h.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^\s*$/.test(a)){e.next=3;break}return t(m([])),e.abrupt("return");case 3:return e.next=5,O(a);case 5:n=e.sent,t(m(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))((function(t){var e=t.locationList,a=t.getLocation,c=t.localValue,o=Object(n.useState)(c),i=Object(v.a)(o,2),s=i[0],u=i[1],l=Object(w.e)(),f=Object(n.useState)(0),p=Object(v.a)(f,2),d=p[0],h=p[1],m=Object(n.useRef)(null),b=e.map((function(t){var e=t.title,a=t.woeid;return r.a.createElement("option",{key:"".concat(t.title,"=").concat(t.woeid),"data-id":a,value:e})}));b=0===b.length?r.a.createElement("option",{value:" "},"No Data"):b;var O=function(t){return e.filter((function(e){return e.title.toUpperCase()===t.toUpperCase()}))};return Object(n.useEffect)((function(){u(c)}),[c]),r.a.createElement("div",{className:"location-search"},r.a.createElement("input",{ref:m,type:"text",value:s,list:"locationList",onInput:function(t){var e=t.currentTarget.value,n=O(e);if(u(e),0===n.length){console.log("...keying"),clearTimeout(d);var r=setTimeout((function(){console.log("...searching"),a(e)}),500);h(r)}else l.push("/".concat(n[0].woeid,"-").concat(n[0].title))}}),r.a.createElement("datalist",{id:"locationList"},b),r.a.createElement("button",{className:"btnSearch",onClick:function(){var t=m.current.value,e=O(t);0!==e.length&&l.push("/".concat(e[0].woeid,"-").concat(e[0].title))}},r.a.createElement("i",{className:"fa fa-search fa-2x"})))})),C=a(22),k=function(t){return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())},T=(a(43),a(11)),L=a(12),_=a(15),N=a(14),S=function(t){Object(_.a)(a,t);var e=Object(N.a)(a);function a(t){var n;return Object(T.a)(this,a),(n=e.call(this,t)).canvasRef=r.a.createRef(),n.cardRef=r.a.createRef(),n.state={canvas_W:0,canvas_H:300},n}return Object(L.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{ref:function(e){t.cardRef=e},className:"chart-card"},r.a.createElement("h2",{className:this.props.className},this.props.title),r.a.createElement("canvas",{ref:function(e){t.canvasRef=e},width:this.state.canvas_W,height:300}))}},{key:"componentDidMount",value:function(){var t=this.cardRef.clientWidth;this.setState({canvas_W:t})}},{key:"componentDidUpdate",value:function(){var t=this.canvasRef.getContext("2d");t.clearRect(0,0,this.state.canvas_W,this.state.canvas_H),this.props.drawChat&&this.props.data&&(console.log(this.props.data),this.props.drawChat(t,this.props.data,this.state.canvas_W,this.state.canvas_H))}}]),a}(r.a.Component),A=function(t,e,a,n,r,c){var o=t.createLinearGradient(a,n,r,c);switch(e){case"red":o.addColorStop(0,"#e01616"),o.addColorStop(1,"#e6dede");break;case"blue":o.addColorStop(0,"#1107a9"),o.addColorStop(1,"#f1efef");break;case"gray":o.addColorStop(0,"#cccccc"),o.addColorStop(1,"#f1efef")}return o},R=function(t,e,a,n,r,c,o){for(var i=0;i<=e;){var s=1-i/e,u=t.lineWidth%2===0?0:.5,l=Math.round(n*s)+u+o;D(t,o,l,a-o,l,c),M(t,i,10,(0===l?12:l-2)+u,c,"#000","bold 10px Arial"),i+=r}},W=function(t,e,a,n,r,c,o,i){for(var s=n.length,u=i||e/s-o,l=(o||0)+20,f=0;f<s;f++){var p=n[f],d=Object.keys(p)[0],h=a*(Object.values(p)[0]/r),v=l+f*u,m=a-h+o,b=A(t,c,v,m,v+u-10,h);B(t,v,m,u-10,h,b),M(t,d,v+(u-10)/2,a+o+20,"#000"," 15px Arial","center")}},M=function(t,e,a,n,r,c,o){var i=o||"";t.save(),t.fillStyle=r,t.font=c,t.textAlign=i,t.fillText(e,a,n),t.restore()},D=function(t,e,a,n,r,c){t.save(),t.strokeStyle=c,t.beginPath(),t.moveTo(e,a),t.lineTo(n,r),t.stroke(),t.restore()},B=function(t,e,a,n,r,c){t.save(),t.fillStyle=c,t.fillRect(e,a,n,r),t.restore()},H=function(t,e,a,n,r,c,o){t.save(),t.fillStyle=o,t.beginPath(),t.moveTo(e,a),t.arc(e,a,n,r,c),t.closePath(),t.fill(),t.restore()},P=(y=S,E=function(t,e,a,n,r,c){if(0!==e.length){var o=0;e.forEach((function(t){var e=Object.values(t)[0];o=e>o?e:o}));var i=Math.round(o/5);R(t,o,a,n-100,i,"#cccccc",c),W(t,a,n-100,e,o,r[0],c)}},function(t){Object(_.a)(a,t);var e=Object(N.a)(a);function a(t){var n;return Object(T.a)(this,a),(n=e.call(this,t)).drawBarChart=function(t,e,a,r){var c=n.props,o=c.barColor,i=c.padding;E(t,e,a,r,o,i)},n}return Object(L.a)(a,[{key:"render",value:function(){return r.a.createElement(y,Object.assign({},this.props,{drawChat:this.drawBarChart}))}}]),a}(r.a.Component)),G=function(t,e){return function(a){Object(_.a)(c,a);var n=Object(N.a)(c);function c(t){var a;return Object(T.a)(this,c),(a=n.call(this,t)).drawPieChart=function(t,n,r,c){var o=a.props,i=(o.pieColor,o.padding);e(t,n,r,c,a.props.pieColor,i)},a}return Object(L.a)(c,[{key:"render",value:function(){return r.a.createElement(t,Object.assign({},this.props,{drawChat:this.drawPieChart}))}}]),c}(r.a.Component)}(S,(function(t,e,a,n,r,c){if(0!==e.length){var o=e.length,i=(a-c)/o,s=i/2,u=n/2,l=Math.min(s,u)-10,f=2*Math.PI;e.map((function(e,a){for(var o=Object.keys(e)[0],p=Object.values(e)[0]/100,d=[f*p,f*(1-p)],h=[r[0],r[1]],v=s+i*a,m=0,b=0;b<2;b++){var O=d[b],g=Math.cos(m+O/2),j=Math.sin(m+O/2),w=A(t,h[b],v,u,v+g*l,u+j*l);H(t,v,u,l,m,m+O,w);var y=v+l/2*g,E=u+l/2*j,x="".concat(Math.round(O/f*100)," %");M(t,x,y,E,"#fff","bold 20px Arial"),m+=O}M(t,o,v,n-c,"#000","15px Arial","center")}))}}));var I=Object(f.b)((function(t){return console.log(t),Object(i.a)({},t)}),(function(t){return{getWeatcherList:function(){var e=Object(h.a)(d.a.mark((function e(a,n,r,c){var o,i,s,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=1;case 2:if(!(i<=5)){e.next=11;break}return f=1,(l=r).setDate(l.getDate()+f),s=k(l),e.next=6,g(a,s);case 6:0!==(u=e.sent).length&&o.push(u[0]);case 8:i++,e.next=2;break;case 11:t(b(a,n,o)),c("");case 13:case"end":return e.stop()}var l,f}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()}}))((function(t){var e=t.match.params.location,a=Object(n.useState)("scroll-hidden"),c=Object(v.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){if(i("scroll-hidden"),console.log("go into Effect..."),e){var a=e.split("-"),n=Object(v.a)(a,2),r=n[0],c=n[1];t.getWeatcherList(r,c,new Date,i)}else i("")}),[e]),r.a.createElement("div",{className:"weather ".concat(o)},r.a.createElement(x,{localValue:t.city}),r.a.createElement("div",{className:"chart-content"},r.a.createElement(P,{title:"Max Temperatrue",className:"max",data:t.maxTempList,barColor:["red"],padding:50}),r.a.createElement(P,{title:"Min Temperatrue",className:"min",data:t.minTempList,barColor:["blue"],padding:50}),r.a.createElement(G,{title:"Humidity",className:"humidity",data:t.humidityList,pieColor:["gray","red"],padding:20})),r.a.createElement("div",{className:"loading-mask"},r.a.createElement("div",{className:"loader"})))}));var U=function(){return r.a.createElement(f.a,{store:l},r.a.createElement(C.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(w.a,{exact:!0,path:["/","/:location"],component:I}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.601257f5.chunk.js.map